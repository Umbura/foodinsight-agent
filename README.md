<div align="center">

# FoodInsight Agent

### Intelligent Market Agent for Food Delivery

<!-- LANGUAGE SWITCHER -->
[![Read in Portuguese](https://img.shields.io/badge/Read%20in-Portuguese-2ea44f?style=for-the-badge&logo=google-translate&logoColor=white)](README_PT.md)

<!-- TECH STACK BADGES -->
<p>
  <img src="https://img.shields.io/badge/Python-3.10%2B-blue" alt="Python 3.10+">
  <img src="https://img.shields.io/badge/Orchestration-CrewAI-orange" alt="CrewAI">
  <img src="https://img.shields.io/badge/Inference-Llama%203.3-purple" alt="Llama 3.3">
</p>

<!-- MAIN IMAGE -->
<!-- Substitua o caminho abaixo pela imagem real se houver, ou remova esta linha -->

*AI Agent Architecture for Automated R&D in Food Delivery.*

</div>

---

## About
**FoodInsight** is an AI agent architecture designed to accelerate the innovation cycle in the food delivery industry. The system simulates an R&D (Research and Development) pipeline, scanning social media for viral food trends, structuring the data, and transforming them into potential product concepts.

I faced several challenges during its production, which, despite the headaches, provided a valuable learning experience in solving complex integration issues. This was my first agent implementation and opened my eyes to the potential of this tool for future projects.

The internal agent was named **Huginn** (Trend Scout) inspired by Norse mythology. Huginn represents "thought," and he was one of Odin's ravens who flew over the world to collect information.

---

## Architecture

The project implements the **CrewAI** orchestration pattern, coordinating three specialized agents that act sequentially:

1.  **Huginn (Trend Scout):**
    *   *Role:* Explorer agent using *Google Search Operators* to mine micro-trends on TikTok and Instagram.
    *   *Technology:* Integration with SerperDev API and stochastic logic for search variation.
2.  **Menu Engineer:**
    *   *Role:* Analyzes technical feasibility, costs, and transport logistics (packaging) of the suggested products.
3.  **Delivery Copywriter:**
    *   *Role:* Generates conversion-optimized metadata (SEO, Sensory Descriptions) following strict UX Writing templates.

---

## Development Challenges

Below, I document the main technical challenges faced and the solutions applied:

### 1. Severe Dependency Conflict (urllib3)
*   **Challenge:** Installing libraries like Selenium and Kubernetes caused conflicts with `urllib3`. Selenium required version `>= 2.5.0`, while Kubernetes required `< 2.4.0`. This made the environment unstable, causing constant pip errors.
*   **Solution:** I isolated execution environments using virtual environments for specific dependency sets, allowing each library to run with its compatible `urllib3` version.

### 2. Insufficient Context (Real-Time Data)
*   **Challenge:** As widely known, LLMs lack real-time knowledge. This would make the project unfeasible, as the goal is to identify current trends.
*   **Solution:** I integrated a search mechanism via the **Serper API**, acting as a bridge between the AI and Google Search results.

### 3. The Repetition Problem (Hallucination Loop)
*   **Challenge:** Initially, the agent fell into a confirmation bias loop, repeatedly suggesting the same product (e.g., "Candied Strawberries") due to aggressive framework caching and static prompts.
*   **Solution:** Implemented a random rotation of search topics (`search_angles`) combined with programmatic cache deactivation (`cache=False`) and timestamp-based seeding to force entropy, ensuring unique results every run.

### 4. Rate Limiting & Model Deprecation
*   **Challenge:** During stress tests, we hit the Groq API *Rate Limit* (TPD) and faced the sudden deprecation of the `llama-3-70b` model.
*   **Solution:**
    *   Immediate migration to `llama-3.3-70b-versatile`.
    *   Created a robust `AppConfig` class to facilitate rapid model switching (Fallback to 8B) and environment variable validation.

### 5. Expectation Alignment (Prompt Engineering)
*   **Challenge:** The marketing agent generated abstract names (e.g., "GlobeBite") that perform poorly in delivery apps, where clarity is king.
*   **Solution:** Refinement of *System Instructions*. We defined strict formatting rules and a "Hybrid" concept (Descriptive Name + Premium Differentiator), in addition to prohibiting isolated text sections for packaging, enforcing a fluid narrative.

> *Author's Note: Solving these issues increased the token cost. In a real-world application, the agent's token consumption versus ROI must be considered, potentially requiring further optimization.*

---

## Results

ðŸ“‚ **[Click here to view the results generated by Huginn](sample)**

---

## How to Run

1.  **Clone the repository:**
    ```bash
    git clone https://github.com/umbura/foodinsight-agent.git
    cd foodinsight-agent
    ```

2.  **Set up the environment:**
    ```bash
    python -m venv .venv
    ```
    *Make sure to activate the environment before installing requirements.*
    ```bash
    pip install -r requirements.txt
    ```

3.  **API Configuration:**
    Create a `.env` file in the root directory and insert your API Keys (Groq, OpenAI, or VertexAI):
    ```bash
    GROQ_API_KEY=gsk_...
    SERPER_API_KEY=...
    ```

4.  **Run with Python:**
    Execute the main script.

---

## Tech Stack

*   **Language:** Python 3.10+
*   **Framework:** CrewAI (Multi-Agent Systems)
*   **LLM Engine:** Llama 3.3 70B via Groq (Selected for <1s latency and high reasoning capability).
*   **Tools:** SerperDev (Web Search & Social Listening).
*   **Safety:** Secret management via `.env` and type validation.

## License
Distributed under the MIT license. See the LICENSE file for more details.
